/*
I20191127-15:52:25.980(1)?        KB Status bearbeitet korrekt bearbeitet_01
I20191127-15:52:25.981(1)? 1  S.1.06     -1          0       0             0
I20191127-15:52:25.981(1)? 21 S.1.07     -1          1       0             0
I20191127-15:52:25.981(1)? 11 S.1.08     -1          0       0             0
I20191127-15:52:25.981(1)? 8  S.1.09     -1          2       0             0
I20191127-15:52:25.981(1)? 20 S.1.10     -1          1       0             0
I20191127-15:52:25.981(1)? 2  S.1.12     -1          1       0             0
I20191127-15:52:25.981(1)? 12 S.1.13     -1          0       0             0
I20191127-15:52:25.981(1)? 16 S.2.01     -1          0       0             0
I20191127-15:52:25.981(1)? 5  S.2.03     -1          2       0             0
I20191127-15:52:25.981(1)? 29 S.2.04     -1          0       0             0
I20191127-15:52:25.981(1)? 3  S.2.05     -1          0       0             0
I20191127-15:52:25.981(1)? 4  S.2.06     -1          1       0             0
I20191127-15:52:25.981(1)? 7  S.2.07     -1          4       0             0
I20191127-15:52:25.981(1)? 9  S.2.08     -1          3       0             0
I20191127-15:52:25.981(1)? 27 S.2.09     -1          0       0             0
I20191127-15:52:25.981(1)? 28 S.2.10     -1          0       0             0
I20191127-15:52:25.982(1)? 14 S.3.01     -1          1       0             0
I20191127-15:52:25.982(1)? 15 S.3.02     -1          0       0             0
I20191127-15:52:25.982(1)? 6  S.3.05     -1          0       0             0
I20191127-15:52:25.982(1)? 18 S.3.06     -1          1       0             0
I20191127-15:52:25.982(1)? 22 S.3.07     -1          0       0             0
I20191127-15:52:25.982(1)? 10 S.3.09     -1          2       0             0
I20191127-15:52:25.982(1)? 24 S.4.03     -1          0       0             0
I20191127-15:52:25.982(1)? 33 S.4.04     -1          0       0             0
I20191127-15:52:25.982(1)? 23 S.4.05     -1          0       0             0
I20191127-15:52:25.982(1)? 26 S.4.06     -1          0       0             0
I20191127-15:52:25.982(1)? 17 S.4.07     -1          1       0             0
I20191127-15:52:25.982(1)? 30 S.4.09     -1          0       0             0
I20191127-15:52:25.982(1)? 19 S.4.11     -1          0       0             0
I20191127-15:52:25.982(1)? 31 S.5.01     -1          0       0             0
I20191127-15:52:25.982(1)? 13 S.5.03     -1          0       0             0
I20191127-15:52:25.982(1)? 25 S.5.04     -1          0       0             0
I20191127-15:52:25.982(1)? 32 S.5.10     -1          0       0             0

 */

export const ResponseParser = {}

ResponseParser.parse = function (lines, { skipNonOccurred = true } = {}) {
  return lines
    .map(line => {
      const split = line.split(/\s+/g)
      const index = parseInt(split[0], 10)
      const competencyId = split[1]
      const status = parseInt(split[2], 10)
      const occurrences = parseInt(split[3], 10)
      const correct = parseInt(split[3], 10)
      return { index, competencyId, status, occurrences, correct }
    })
    .filter(entry => {
      if (skipNonOccurred && entry.occurrences === 0) {
        return false
      }

      return true
    })
    .sort((a, b) => b.status - a.status)
}
