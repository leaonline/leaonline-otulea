<template name="task">
	<div class="container lea-task-container">
		{{#unless loadComplete}}
			<div class="w-100 text-center">
				<i class="fa fas fa-3x fa-fw fa-spinner fa-pulse"></i>
			</div>
		{{else}}
				<div class="w-100 d-flex align-items-center my-3">
					<div class="progress w-100">
						<div class="progress-bar bg-{{dimension.type}}" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
					</div>
					<span class="mx-5 no-wrap">{{i18n dimension.label}} - {{i18n level.label}}</span>
					{{#actionButton sm=true tts="common.toOverview" outline=true class="no-wrap" btnClass="btn-sm"}}
						{{#each dimensions}}
						<i class="fa fas fa-square text-{{this.type}}"></i>
						{{/each}}
						{{/actionButton}}
				</div>

			{{#with taskDoc}}
				<div class="card my-2">
					{{#each storyElement in this.story}}
						<div class="card-body">
							{{> TaskRendererFactory content=storyElement}}
						</div>
					{{/each}}
				</div>

				<div class="card my-2">
					{{#each stimuli in this.stimuli}}
						<div class="card-body">
							{{> TaskRendererFactory content=stimuli}}
						</div>
					{{/each}}
				</div>

				{{#with dimension}}
				<div class="card my-4 border border-{{type}} ">
					<div class="card-header bg-{{this.type}} text-white d-flex">
						<i class="ml-auto fa fas fa-fw fa-{{this.icon}}"></i>
					</div>
				{{#with currentPage}}
					{{#each taskContent in this}}
						<div class="card-body">
							{{> TaskRendererFactory content=taskContent}}
						</div>
					{{/each}}
					<div class="card-body d-flex">
						{{#if hasPrev}}
							{{> actionButton outline=true tts="common.back" btnClass="lea-pagenav-button"
									data-action="back"
									label=(i18n "common.next") class="ml-auto"}}
						{{/if}}
						{{#if hasNext}}
							{{> actionButton outline=true tts="common.next" btnClass="lea-pagenav-button"
									data-action="next"
									label=(i18n "common.next") class="ml-auto"}}
						{{else}}
							{{> actionButton tts="common.finish" btnClass="lea-pagenav-finish-button"
									icon="thumbs-up" label=(i18n "common.finish") class="ml-auto"}}
						{{/if}}
					</div>
				{{/with}}
			</div>
				{{/with}}
			{{/with}}
		{{/unless}}
	</div>
</template>