<template name="task">
	<div class="container lea-task-container">
		{{#unless loadComplete}}
			<div class="w-100 text-center">
				<i class="fa fas fa-3x fa-fw fa-spinner fa-pulse"></i>
			</div>
		{{else}}
			{{#with sessionDoc}}
				<div class="text-center">
					{{this.dimension}} / {{this.level}}
				</div>
			{{/with}}

			{{#with taskDoc}}
				<div class="card my-2">
					{{#each storyElement in this.story}}
						<div class="card-body">
							{{> TaskRendererFactory content=storyElement}}
						</div>
					{{/each}}
				</div>

				<div class="card my-2">
					{{#each stimuli in this.stimuli}}
						<div class="card-body">
							{{> TaskRendererFactory content=stimuli}}
						</div>
					{{/each}}
				</div>

				{{#with currentPage}}
					<div class="card my-4">
						{{#each taskContent in this}}
							<div class="card-body">
								{{> TaskRendererFactory content=taskContent}}
							</div>
						{{/each}}
						<div class="card-body d-flex">
							{{#if hasNext}}
								{{> actionButton outline=true tts="common.next" icon="arrow-right" class="ml-auto"}}
							{{/if}}
						</div>
					</div>
				{{/with}}
			{{/with}}
		{{/unless}}
	</div>
</template>