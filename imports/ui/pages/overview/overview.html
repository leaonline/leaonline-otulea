<template name="overview">
    <div class="lea-overview-container">

        {{!--
            the defaul container lists all dimensions that have been found when
            iterating all unit sets that are associated with this application
        --}}

        {{#container class="overview-dimensions-container my-4"}}
            {{#if loadComplete}}
                <div class="card {{#if
                        dimensionSelected}}d-unavailable2{{/if}}">
                    <div class="card-body">
                        {{> textGroup tts="pages.overview.chooseDimension"}}
                    </div>
                    <div class="card-body mt-3">
                        <div class="row">
                            {{#each dimension in allDimensions}}
                                <div class="col col-xs-12 col-md-6 col-lg-3 my-1">
                                    {{> actionButton
                                            block=true
                                            outline=true
                                            icon=dimension.icon
                                            type=(colorTypeName dimension)
                                            iconClass="d-block ml-auto mr-auto my-2 fa-3x"
                                            data-dimension=dimension._id
                                            active=(isSelectedDimension dimension._id)
                                            label=dimension.title
                                            btnClass="lea-dimension-button font-weight-bold no-wrap"}}
                                </div>
                            {{else}}
                                {{> loading}}
                            {{/each}}
                        </div>
                    </div>
                </div>
            {{else}}
                {{>loading}}
            {{/if}}
        {{/container}}

        {{!--
            if the dimension has been selected we display all levels we can find
            by the given dimension in all unit sets that are found by this app
        --}}

        {{#with dimensionSelected}}
            {{#container class="overview-level-container my-4"}}
                {{#if loadComplete}}
                    <div class="card">
                        <div class="card-body">
                            {{#textGroup tts="pages.overview.chooseLevel"
                                         type=this.type }}
                                {{> actionButton
                                        outline=true
                                        tts="common.back"
                                        type=this.type
                                        icon="arrow-up"
                                        data-target=".overview-level-container"
                                        btnClass="lea-back-button  no-wrap"
                                        data-type="level" }}
                            {{/textGroup}}
                        </div>
                        <div class="card-body mt-3">
                            <div class="row">
                                {{#each level in allLevels}}
                                    <div class="col col-xs-12 col-md-6 col-lg-3 my-1">
                                        {{> actionButton
                                                class="w-100 overview-button"
                                                block=true
                                                type=this.type outline=true
                                                data-level=level._id
                                                active=(isSelectedLevel level._id)
                                                tts=level.title
                                                label=(level.title)
                                                btnClass="lea-level-button p-5 font-weight-bold  no-wrap" }}
                                    </div>
                                {{else}}
                                    {{> loading}}
                                {{/each}}
                            </div>
                        </div>
                    </div>
                {{else}}
                    {{>loading}}
                {{/if}}
            {{/container}}

            {{!--
                if the dimension has been selected we display all levels we can find
                by the given dimension in all unit sets that are found by this app
            --}}

            {{#if levelSelected}}
                {{#container class="overview-session-container my-4"}}
                    <div class="card">
                        {{#if levelLoadComplete}}
                            <div class="card-body mt-3 overview-level-description">

                                {{#textGroup text=levelDescription class="w-100"
                                             type=this.type}}
                                    {{> actionButton
                                            outline=true
                                            tts="common.back"
                                            data-target=".overview-session-container"
                                            icon="arrow-up"
                                            btnClass="lea-back-button no-wrap"
                                            data-type="launch"
                                            type=this.type}}
                                {{/textGroup}}
                            </div>

                            {{!--
                                if a sessionDoc has been found we need to display a
                                list of decisions for the user, otherwise we display
                                the default launch button
                            --}}

                            <div class="card-body">
                                {{#with sessionDoc}}
                                    {{>textGroup
                                            text=(i18n "pages.overview.sessionFound")
                                            class="w-100"
                                            type=this.type}}

                                    <div class="row mt-3">
                                        <div class="col col-xs-12 col-md-6 col-lg-3">
                                            {{> actionButton
                                                    class="w-100 overview-button"
                                                    block=true
                                                    type="primary"
                                                    outline=true
                                                    disabled=starting
                                                    tts=(i18n "actions.continue")
                                                    label=(i18n "actions.continue")
                                                    btnClass="lea-continue-button p-5 font-weight-bold  no-wrap" }}
                                        </div>
                                        <div class="col col-xs-12 col-md-6 col-lg-3">
                                            {{> actionButton
                                                    class="w-100 overview-button"
                                                    block=true
                                                    type="primary"
                                                    outline=true
                                                    disabled=starting
                                                    tts=(i18n "actions.restart")
                                                    label=(i18n "actions.restart")
                                                    btnClass="lea-restart-button p-5 font-weight-bold  no-wrap" }}
                                        </div>
                                    </div>

                                {{else}}
                                    {{> actionButton
                                            class="lea-overview-confirm-container w-100 mt-3"
                                            data-restart="true"
                                            lg=true
                                            block=true
                                            disabled=starting
                                            type="primary"
                                            tts="pages.overview.confirm"
                                            label=(i18n "pages.overview.confirm")
                                            btnClass="lea-overview-confirm-button  no-wrap" }}
                                {{/with}}
                            </div>
                        {{else}}
                            <div class="card-body">
                                {{>loading}}
                            </div>
                        {{/if}}
                    </div>
                {{/container}}
            {{/if}}
        {{/with}}
    </div>
</template>